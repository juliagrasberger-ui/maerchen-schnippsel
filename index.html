<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>M√§rchen-Text-Generator</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  font-family: Arial, sans-serif;
  background-color: #fff8e1;
  padding: 20px;
}
h1 {
  text-align: center;
  color: #8b4513;
}
.container {
  max-width: 760px;
  margin: auto;
}
label {
  font-weight: bold;
  margin-top: 10px;
  display: block;
}
input, select, button {
  width: 100%;
  padding: 10px;
  margin-top: 5px;
  border-radius: 8px;
  border: 1px solid #8b4513;
  font-size: 16px;
}
button {
  background-color: #ffdd99;
  cursor: pointer;
}
button:hover {
  background-color: #ffd066;
}
.story {
  background-color: #fff3cd;
  padding: 20px;
  margin-top: 20px;
  border-radius: 12px;
  min-height: 120px;
}
#downloadBtn {
  display: none;
  margin-top: 10px;
}
</style>
</head>

<body>

<h1>Ein M√§rchen schreiben</h1>

<div class="container">

<label>√úberschrift:</label>
<input id="title" placeholder="Titel deines M√§rchens">

<label>Hauptfigur:</label>
<input id="person" placeholder="z. B. ein mutiger Junge, Schneewei√üchen, ein rostiger Ritter, ein Zauberlehrling">

<label>Ort:</label>
<input id="place" placeholder="z. B. in einem kleinen Dorf, auf einer Burg, tief im Wald, hinter einem Teich">

<label>Gegner (B√∂sewicht):</label>
<input id="villain" placeholder="z. B. ein gr√ºner Drache, eine fiese Hexe, ein b√∂ser Zauberer, eine gemeine K√∂nigin">

<label>Anzahl der Aufgaben:</label>
<select id="taskCount">
  <option value="">Bitte w√§hlen</option>
  <option>1</option>
  <option>3</option>
  <option>7</option>
  <option>12</option>
</select>

<label>Art der Aufgabe:</label>
<select id="taskType">
  <option value="">Bitte w√§hlen</option>
  <option>R√§tsel l√∂sen</option>
  <option>N√ºsse sammeln</option>
  <option>N√§chte wach bleiben</option>
  <option>Geister fangen</option>
  <option>Goldesel finden</option>
</select>

<label>Helfer:</label>
<input id="helper" placeholder="z. B. eine Fee, ein besonderes Tier, ein Zwerg, der J√§ger">

<label>Magischer Gegenstand:</label>
<input id="item" placeholder="z. B. Zauberstab, Schl√ºssel, Schuh, Zaubertrank">
  
<label>Belohnung:</label>
<input id="reward" placeholder="z. B. einen Schatz, Ruhm und Ehre">

<button onclick="generateStory()">M√§rchen erzeugen</button>

<div class="story" id="story"></div>

<button id="downloadBtn" onclick="downloadStory()">üì• M√§rchen speichern</button>

</div>

<script>
function generateStory() {
  const title = getValue("title");
  const person = getValue("person");
  const place = getValue("place");
  const villain = getValue("villain");
  const helper = getValue("helper");
  const item = getValue("item");
  const taskCount = getValue("taskCount");
  const taskType = getValue("taskType");
const reward = getValue("reward");

  if (!person || !place || !villain || !helper || !item || !taskCount || !taskType || !reward) {
    alert("Bitte f√ºlle alle Felder aus.");
    return;
  }
  
  const storyText = `
Es war einmal ${person}. ${person} lebte vor langer Zeit ${place}.
Eines Tages geriet ${person} in gro√üe Gefahr, denn ${villain} bedrohte das Land.
${villain} verlangte Schwieriges: ${person} sollte ${taskCount} ${taskType} , sonst w√ºrde ${villain} das K√∂nigreich in gro√ües Ungl√ºck st√ºrzen.
${person} war verzweifelt und wusste nicht wie das gehen sollte.
Doch gl√ºcklicherweise kam ${helper} zur Hilfe und gab ${person} ${item}.
Mit ${item} konnte ${person}  ${taskCount} ${taskType} ganz einfach schaffen. So kam es, dass  ${villain} sich ein anderes K√∂nigreich suchen musste.
Am Ende wurde ${person} ber√ºhmt und bekam  ${reward} und alle lebten gl√ºcklich und zufrieden bis an ihr Lebensende.
`;

  document.getElementById("story").innerHTML =
    (title ? `<h2>${title}</h2>` : "") +
    storyText.replace(/\n/g, "<br>");

  document.getElementById("downloadBtn").style.display = "block";
}

function getValue(id) {
  return document.getElementById(id).value.trim();
}

function downloadStory() {
  const text = document.getElementById("story").innerText;
  const blob = new Blob([text], { type: "text/plain;charset=utf-8" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "maerchen_5klasse.txt";
  link.click();
}
</script>

</body>
</html>
